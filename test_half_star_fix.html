<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Half Star Fix</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div style="padding: 20px;">
        <h2>Test Half Star Fix</h2>
        
        <div class="form-group">
            <label for="bookRating" class="form-label">Rating (Test getCurrentRating)</label>
            <div class="rating-input">
                <div class="half-stars" id="ratingStars">
                    <i class="fas fa-star star" data-rating="1" data-star="1"></i>
                    <i class="fas fa-star star" data-rating="2" data-star="2"></i>
                    <i class="fas fa-star star" data-rating="3" data-star="3"></i>
                    <i class="fas fa-star star" data-rating="4" data-star="4"></i>
                    <i class="fas fa-star star" data-rating="5" data-star="5"></i>
                </div>
                <span class="rating-display-text" id="ratingText">No rating</span>
                <input type="hidden" id="bookRating" name="rating" value="0">
            </div>
        </div>

        <div style="margin: 20px 0;">
            <h3>Test Results</h3>
            <div id="testResults" style="font-family: monospace; background: #f5f5f5; padding: 10px; border-radius: 5px;"></div>
        </div>

        <div style="margin: 20px 0;">
            <button onclick="runTests()">Run Half-Star Tests</button>
            <button onclick="testRating(2.5)">Set 2.5 Stars</button>
            <button onclick="testRating(3.5)">Set 3.5 Stars</button>
            <button onclick="testRating(4.5)">Set 4.5 Stars</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        let bookTracker;
        
        document.addEventListener('DOMContentLoaded', function() {
            bookTracker = new BookTracker();
            
            // Override some methods to avoid full initialization
            bookTracker.loadBooksFromStorage = function() {};
            bookTracker.bindEvents = function() {};
            bookTracker.setupTabNavigation = function() {};
            bookTracker.setupAutocomplete = function() {};
            bookTracker.renderBooks = function() {};
            bookTracker.updateStats = function() {};
            bookTracker.setupInitialData = function() {};
            
            // Initialize just the rating system
            bookTracker.setupRatingInputs();
        });

        function testRating(rating) {
            console.log(`Testing rating: ${rating}`);
            
            // Set the rating
            bookTracker.setRating(rating);
            
            // Get the rating back
            const retrievedRating = bookTracker.getCurrentRating();
            
            // Display results
            const results = document.getElementById('testResults');
            results.innerHTML += `Set: ${rating}, Got: ${retrievedRating}, Match: ${rating === retrievedRating}\n`;
            
            console.log(`Set: ${rating}, Got: ${retrievedRating}, Match: ${rating === retrievedRating}`);
        }

        function runTests() {
            const results = document.getElementById('testResults');
            results.innerHTML = 'Running tests...\n';
            
            const testValues = [0.5, 1, 1.5, 2, 2.5, 3, 3.5, 4, 4.5, 5];
            
            testValues.forEach(rating => {
                setTimeout(() => {
                    testRating(rating);
                }, 100);
            });
        }
    </script>
</body>
</html>
