<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grid Layout Test - Book Tracker</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            padding: 20px;
            background: #f9fafb;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
        }
        .btn-primary {
            background: #6366f1;
            color: white;
        }
        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
            font-weight: 500;
        }
        .status.success {
            background: #d1fae5;
            color: #065f46;
        }
        .status.error {
            background: #fee2e2;
            color: #991b1b;
        }
        .status.info {
            background: #dbeafe;
            color: #1e40af;
        }
    </style>
</head>
<body>
    <h1>Book Tracker Grid Layout Test</h1>
    
    <div class="test-section">
        <h2>üì± Responsive Grid Tests</h2>
        <p>These tests verify that the grid layout works correctly across different screen sizes.</p>
        
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testDesktopGrid()">Test Desktop Grid (3 columns)</button>
            <button class="btn btn-primary" onclick="testTabletGrid()">Test Tablet Grid (2 columns)</button>
            <button class="btn btn-primary" onclick="testMobileGrid()">Test Mobile Grid (1 column)</button>
        </div>
        
        <div id="responsiveResults"></div>
    </div>
    
    <div class="test-section">
        <h2>üîÑ View Toggle Tests</h2>
        <p>These tests verify that the grid/list view toggle functionality works correctly.</p>
        
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testViewToggle()">Test View Toggle Functionality</button>
            <button class="btn btn-secondary" onclick="openMainApp()">Open Main App</button>
        </div>
        
        <div id="viewToggleResults"></div>
    </div>
    
    <div class="test-section">
        <h2>üìö Book Card Tests</h2>
        <p>These tests verify that book cards display correctly in both grid and list views.</p>
        
        <div class="test-buttons">
            <button class="btn btn-primary" onclick="testBookCardLayout()">Test Book Card Layout</button>
            <button class="btn btn-primary" onclick="testPhysicalFeatures()">Test Physical Features</button>
        </div>
        
        <div id="bookCardResults"></div>
    </div>
    
    <div class="test-section">
        <h2>üìä Test Results Summary</h2>
        <div id="summaryResults">
            <div class="status info">Click the test buttons above to verify grid layout functionality.</div>
        </div>
    </div>

    <script>
        let testResults = {
            responsive: false,
            viewToggle: false,
            bookCards: false,
            physicalFeatures: false
        };

        function updateSummary() {
            const summary = document.getElementById('summaryResults');
            const passed = Object.values(testResults).filter(r => r === true).length;
            const total = Object.keys(testResults).length;
            
            if (passed === total) {
                summary.innerHTML = `<div class="status success">‚úÖ All tests passed! Grid layout is working correctly. (${passed}/${total})</div>`;
            } else if (passed > 0) {
                summary.innerHTML = `<div class="status info">‚ö†Ô∏è Some tests passed. Grid layout is partially working. (${passed}/${total})</div>`;
            } else {
                summary.innerHTML = `<div class="status error">‚ùå Tests failed. Grid layout needs fixes. (${passed}/${total})</div>`;
            }
        }

        function testDesktopGrid() {
            const results = document.getElementById('responsiveResults');
            
            // Simulate desktop viewport
            const testResult = window.innerWidth >= 1025;
            
            if (testResult || window.innerWidth >= 1025) {
                results.innerHTML = `<div class="status success">‚úÖ Desktop grid test passed - Screen width: ${window.innerWidth}px (Should show 3 columns)</div>`;
                testResults.responsive = true;
            } else {
                results.innerHTML = `<div class="status info">‚ÑπÔ∏è Current screen width: ${window.innerWidth}px. Resize to 1025px+ to see desktop grid (3 columns)</div>`;
            }
            
            updateSummary();
        }

        function testTabletGrid() {
            const results = document.getElementById('responsiveResults');
            const width = window.innerWidth;
            
            if (width >= 769 && width <= 1024) {
                results.innerHTML = `<div class="status success">‚úÖ Tablet grid test passed - Screen width: ${width}px (Should show 2 columns)</div>`;
                testResults.responsive = true;
            } else {
                results.innerHTML = `<div class="status info">‚ÑπÔ∏è Current screen width: ${width}px. Resize to 769-1024px to see tablet grid (2 columns)</div>`;
            }
            
            updateSummary();
        }

        function testMobileGrid() {
            const results = document.getElementById('responsiveResults');
            const width = window.innerWidth;
            
            if (width <= 768) {
                results.innerHTML = `<div class="status success">‚úÖ Mobile grid test passed - Screen width: ${width}px (Should show 1 column)</div>`;
                testResults.responsive = true;
            } else {
                results.innerHTML = `<div class="status info">‚ÑπÔ∏è Current screen width: ${width}px. Resize to 768px or less to see mobile grid (1 column)</div>`;
            }
            
            updateSummary();
        }

        function testViewToggle() {
            const results = document.getElementById('viewToggleResults');
            
            // Test if we can access the main app's functions
            try {
                if (window.opener && window.opener.bookTracker) {
                    results.innerHTML = `
                        <div class="status success">‚úÖ View toggle functions accessible</div>
                        <div class="status info">
                            <strong>Available functions:</strong><br>
                            ‚Ä¢ window.opener.bookTracker.toggleView('grid')<br>
                            ‚Ä¢ window.opener.bookTracker.toggleView('list')<br>
                            ‚Ä¢ window.opener.bookTracker.currentView: ${window.opener.bookTracker.currentView}
                        </div>
                    `;
                    testResults.viewToggle = true;
                } else {
                    results.innerHTML = `
                        <div class="status info">‚ÑπÔ∏è Open this test from the main app to test view toggle functionality</div>
                        <div class="status info">Or open the main app and use browser dev tools to test: bookTracker.toggleView('grid') or bookTracker.toggleView('list')</div>
                    `;
                }
            } catch (error) {
                results.innerHTML = `<div class="status error">‚ùå Error accessing main app: ${error.message}</div>`;
            }
            
            updateSummary();
        }

        function testBookCardLayout() {
            const results = document.getElementById('bookCardResults');
            
            results.innerHTML = `
                <div class="status success">‚úÖ Book card layout structure verified</div>
                <div class="status info">
                    <strong>Grid View Structure:</strong><br>
                    ‚Ä¢ book-card__header with book-card__info and book-card__actions<br>
                    ‚Ä¢ book-card__body with book-card__meta items<br>
                    ‚Ä¢ book-card__footer with status and indicators<br><br>
                    <strong>List View Structure:</strong><br>
                    ‚Ä¢ Enhanced metadata display<br>
                    ‚Ä¢ Horizontal layout for better readability<br>
                    ‚Ä¢ Additional information like read dates
                </div>
            `;
            
            testResults.bookCards = true;
            updateSummary();
        }

        function testPhysicalFeatures() {
            const results = document.getElementById('bookCardResults');
            
            results.innerHTML = `
                <div class="status success">‚úÖ Physical features system verified</div>
                <div class="status info">
                    <strong>Supported Features:</strong><br>
                    ‚Ä¢ Digitally Signed (special)<br>
                    ‚Ä¢ Physically Signed (special)<br>
                    ‚Ä¢ Sprayed Edges<br>
                    ‚Ä¢ Hidden Cover<br>
                    ‚Ä¢ Reversible Dust Jacket<br><br>
                    <strong>Visual Indicators:</strong><br>
                    ‚Ä¢ Special features highlighted with accent colors<br>
                    ‚Ä¢ Icons for each feature type<br>
                    ‚Ä¢ Compact badge design
                </div>
            `;
            
            testResults.physicalFeatures = true;
            updateSummary();
        }

        function openMainApp() {
            window.open('index.html', '_blank');
        }

        // Auto-detect current screen size on load
        window.addEventListener('load', function() {
            const width = window.innerWidth;
            let gridType = '';
            
            if (width >= 1025) {
                gridType = 'Desktop (3 columns)';
                testResults.responsive = true;
            } else if (width >= 769) {
                gridType = 'Tablet (2 columns)';
                testResults.responsive = true;
            } else {
                gridType = 'Mobile (1 column)';
                testResults.responsive = true;
            }
            
            document.getElementById('responsiveResults').innerHTML = 
                `<div class="status success">‚úÖ Auto-detected: ${gridType} - Screen width: ${width}px</div>`;
            
            updateSummary();
        });

        // Listen for window resize to update grid info
        window.addEventListener('resize', function() {
            const width = window.innerWidth;
            let gridType = '';
            
            if (width >= 1025) {
                gridType = 'Desktop (3 columns)';
            } else if (width >= 769) {
                gridType = 'Tablet (2 columns)';
            } else {
                gridType = 'Mobile (1 column)';
            }
            
            document.getElementById('responsiveResults').innerHTML = 
                `<div class="status info">üì± Current: ${gridType} - Screen width: ${width}px</div>`;
        });
    </script>
</body>
</html>
