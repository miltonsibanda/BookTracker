<!DOCTYPE html>
<html>
<head>
    <title>Test localStorage</title>
</head>
<body>
    <h1>localStorage Test</h1>
    <button onclick="testStorage()">Test Storage</button>
    <button onclick="clearStorage()">Clear Storage</button>
    <div id="output"></div>
    
    <script>
        function testStorage() {
            const output = document.getElementById('output');
            output.innerHTML = '';
            
            // Check what's in localStorage
            const stored = localStorage.getItem('bookTracker_books');
            output.innerHTML += `<p>Current storage: ${stored ? stored.substring(0, 200) + '...' : 'null'}</p>`;
            
            if (stored) {
                try {
                    const parsed = JSON.parse(stored);
                    output.innerHTML += `<p>Parsed successfully: ${parsed.length} books</p>`;
                    parsed.forEach((book, i) => {
                        output.innerHTML += `<p>Book ${i+1}: ${book.title} by ${book.author}</p>`;
                    });
                } catch (e) {
                    output.innerHTML += `<p>Parse error: ${e.message}</p>`;
                }
            }
        }
        
        function clearStorage() {
            localStorage.removeItem('bookTracker_books');
            localStorage.removeItem('bookTrackerBooks');
            document.getElementById('output').innerHTML = '<p>Storage cleared</p>';
        }
        
        // Run test on load
        testStorage();
    </script>
</body>
</html>
